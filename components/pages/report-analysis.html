<!-- 报表分析页面 -->
<div id="report-analysisPage" class="page">
    <div class="page-header">
        <h1>报表分析</h1>
        <div class="page-actions">
            <button class="btn btn-primary" onclick="exportDetailedData()">
                <span class="btn-icon">📊</span>
                导出数据
            </button>
            <button class="btn btn-secondary" onclick="toggleTableColumns()">
                <span class="btn-icon">⚙️</span>
                列设置
            </button>
        </div>
    </div>

    <div class="page-content">
        <!-- 时间筛选区域 -->
        <div class="time-filter-section">
            <div class="time-tabs">
                <button class="time-tab active" onclick="switchTimeDimension('month')">月度</button>
                <button class="time-tab" onclick="switchTimeDimension('quarter')">季度</button>
                <button class="time-tab" onclick="switchTimeDimension('year')">年度</button>
                <button class="time-tab" onclick="switchTimeDimension('custom')">自定义</button>
            </div>
            
            <!-- 月度选择器 -->
            <div id="timeSelector" class="time-selector">
                <select id="yearSelect" class="filter-select">
                    <option value="2024">2024年</option>
                    <option value="2025" selected>2025年</option>
                </select>
                <select id="monthSelect" class="filter-select">
                    <option value="1">1月</option>
                    <option value="2">2月</option>
                    <option value="3">3月</option>
                    <option value="4">4月</option>
                    <option value="5">5月</option>
                    <option value="6">6月</option>
                    <option value="7">7月</option>
                    <option value="8" selected>8月</option>
                    <option value="9">9月</option>
                    <option value="10">10月</option>
                    <option value="11">11月</option>
                    <option value="12">12月</option>
                </select>
            </div>
            
            <!-- 季度选择器 -->
            <div id="quarterSelector" class="time-selector" style="display: none;">
                <select id="quarterYearSelect" class="filter-select">
                    <option value="2024">2024年</option>
                    <option value="2025" selected>2025年</option>
                </select>
                <select id="quarterSelect" class="filter-select">
                    <option value="1">第1季度</option>
                    <option value="2">第2季度</option>
                    <option value="3" selected>第3季度</option>
                    <option value="4">第4季度</option>
                </select>
            </div>
            
            <!-- 年度选择器 -->
            <div id="yearSelector" class="time-selector" style="display: none;">
                <select id="yearYearSelect" class="filter-select">
                    <option value="2024">2024年</option>
                    <option value="2025" selected>2025年</option>
                </select>
            </div>
            
            <!-- 自定义日期范围 -->
            <div id="customDateRange" class="time-selector" style="display: none;">
                <input type="date" id="startDate" class="filter-input" placeholder="开始日期">
                <span class="date-separator">至</span>
                <input type="date" id="endDate" class="filter-input" placeholder="结束日期">
            </div>
            
            <div class="filter-actions">
                <button class="btn btn-primary" onclick="applyTimeFilter()">应用筛选</button>
                <button class="btn btn-secondary" onclick="resetTimeFilter()">重置</button>
            </div>
        </div>

        <!-- KPI卡片区域 -->
        <div class="kpi-section">
            <div class="kpi-cards">
                <div class="kpi-card">
                    <div class="metric-value">156.5小时</div>
                    <div class="metric-label">总工时</div>
                </div>
                <div class="kpi-card">
                    <div class="metric-value">19.6人天</div>
                    <div class="metric-label">总人天</div>
                </div>
                <div class="kpi-card">
                    <div class="metric-value">7.8小时/天</div>
                    <div class="metric-label">日均工时</div>
                </div>
                <div class="kpi-card">
                    <div class="metric-value">95.2%</div>
                    <div class="metric-label">填报率</div>
                </div>
            </div>
        </div>

        <!-- 图表区域 -->
        <div class="charts-section">
            <div class="chart-grid">
                <div class="chart-container">
                    <h3>工时统计报表</h3>
                    <div class="chart-placeholder">
                        <div class="chart-info">
                            <p>最近6个月总工时: 1,234.5小时</p>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <h3>项目进度报表</h3>
                    <div class="chart-placeholder">
                        <div class="chart-info">
                            <p>进行中项目: 8个</p>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <h3>财务分析报表</h3>
                    <div class="chart-placeholder">
                        <div class="chart-info">
                            <p>总收入: ¥1,234,567</p>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <h3>团队效率报表</h3>
                    <div class="chart-placeholder">
                        <div class="chart-info">
                            <p>最佳表现者: 张三</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 详细数据表格 -->
        <div class="table-section">
            <div class="table-header">
                <h3>详细数据</h3>
                <div class="table-actions">
                    <button class="btn btn-sm btn-secondary" onclick="refreshData()">刷新</button>
                </div>
            </div>
            
            <div class="table-container">
                <table class="data-table" id="timesheetAnalysisTable">
                    <thead>
                        <tr>
                            <th>日期</th>
                            <th>员工</th>
                            <th>项目</th>
                            <th>工时</th>
                            <th>人天</th>
                            <th>任务描述</th>
                            <th>状态</th>
                            <th>创建时间</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="8" style="text-align: center; padding: 20px; color: #999;">正在加载数据...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- 分页控件 -->
            <div class="pagination">
                <div class="pagination-info">显示第 1-10 条，共 45 条记录</div>
                <div class="pagination-controls">
                    <button class="pagination-btn" disabled>上一页</button>
                    <button class="page-number active" onclick="changeAnalysisPage(1)">1</button>
                    <button class="page-number" onclick="changeAnalysisPage(2)">2</button>
                    <button class="page-number" onclick="changeAnalysisPage(3)">3</button>
                    <button class="page-number" onclick="changeAnalysisPage(4)">4</button>
                    <button class="page-number" onclick="changeAnalysisPage(5)">5</button>
                    <button class="pagination-btn">下一页</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// 报表分析页面初始化
document.addEventListener('DOMContentLoaded', function() {
    console.log('报表分析页面已加载');
    initReportTimeFilter();
});

function refreshData() {
    console.log('刷新报表数据');
    updateTableData();
    showNotification('数据已刷新', 'success');
}
</script>
